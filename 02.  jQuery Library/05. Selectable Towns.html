<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>

</head>
<style>li {
    display: inline-block  }
</style>

<body>
<ul id="items">
    <li>Sofia</li>
    <li>Varna</li>
</ul>

<button id="showTownsButton">Show Towns</button>
<div id="selectedTowns"></div>
</body>

<script>
    magicCode();
    function magicCode() {
        $('#items').on('click', 'li', function () {
            let li = $(this);
            if(li.attr('data-selected')){
                li.removeAttr('data-selected');
                li.css('background', '');
            }
            else{
                li.attr('data-selected', 'true');
                li.css('background', '#DDD');
            }
        });
        $('#showTownsButton').on('click', function () {
            let selectLi = $('#items li[data-selected=true]');
            let towns = selectLi.toArray().map(li => li.textContent).join(', ');
            $('#selectedTowns').text("Selected towns: " + towns);
        });
    }

</script>

</html>